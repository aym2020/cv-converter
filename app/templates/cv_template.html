<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Template</title>
    <!-- Import Open Sans font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='cv_styles.css') }}">
    <!-- Add required libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Print Button -->
    <button onclick="window.print()" class="print-button">Print to PDF</button>
    
    <!-- Page 1 -->
    <div class="page page-1">
        <!-- Logo Container -->
        <div class="logo-container">
            <img src="{{ url_for('static', filename='randstad_logo.png') }}" alt="Randstad Digital Logo" class="company-logo">
        </div>

        <!-- Candidate Information -->
        <h1>{{ data.first_name }} {{ data.name }}</h1>
        <h2>{{ data.job_title }}</h2>

        <!-- Delivery Manager Information -->
        <div class="manager-info">
            <p class="delivery-manager">Delivery Manager</p>
            <p class="manager-name">{{ data.manager_name }}</p>
            <p class="manager-email">{{ data.manager_email }}</p>
        </div>

        <!-- Bulles Image -->
        <div class="bulles-container">
            <img src="{{ url_for('static', filename='bulles.png') }}" alt="Bulles Image" class="bulles-image">
        </div>
    </div>

    <!-- Page 2 -->
    {% for page in data.page_2_content %}
    <div class="page page-2">
        {% for block in page %}

        {% if block.type == "skills" %}
            <div class="section-title">{{ block.heading }}</div>
            <div class="skills-list">
            {% for item in block["items"] %}
                <div class="skill-category">
                <span class="skill-category-name">{{ item.category }}:</span>
                <span class="skill-items">{{ item.skills | join(', ') }}</span>
                </div>
            {% endfor %}
            </div>
        
        {% elif block.type == "education" %}
            <div class="section-title">{{ block.heading }}</div>
            <div class="education-list">
            {% for item in block["items"] %}
                <h3>
                {{ item.degree }}
                {% if item.institution %}
                    - {{ item.institution }}
                {% endif %}
                </h3>
                <p><em>{{ item.duration }}</em></p>
                <p>{{ item.description }}</p>
            {% endfor %}
            </div>
            
        {% elif block.type == "certifications" %}
            <div class="section-title">{{ block.heading }}</div>
            <div class="certifications-list">
                {% for item in block["items"] %}
                    <div class="certification-item">
                        <span class="certification-name">{{ item.name }}</span>
                        <span class="certification-issuer"> - {{ item.issuer }}</span>
                    </div>
                {% endfor %}
            </div>
        
        {% elif block.type == "languages" %}
            <div class="section-title">{{ block.heading }}</div>
            <div class="languages-list">
            {% for item in block["items"] %}
                <div class="language-item">
                <span class="language-name">{{ item.language }}:</span>
                <span class="language-level">{{ item.level }}</span>
                </div>
            {% endfor %}
            </div>

        {% elif block.type == "experiences" %}
            <div class="section-title">{{ block.heading }}</div>
            <div class="experiences-list">
                {% for item in block["items"] %}
                  {% if item.job_title or item.company %}
                    <h3>
                      {{ item.job_title }}
                      {% if item.job_title and item.company %} - {% endif %}
                      {{ item.company }}
                    </h3>
                  {% endif %}
                  {% if item.duration %}
                    <p><em>{{ item.duration }}</em></p>
                  {% endif %}
              
                  {# Now the bullet-point description #}
                  {% set lines = item.description.split('\n') %}
                  <ul>
                    {% for line in lines %}
                      {% set stripped = line.strip() %}
                      {% if stripped %}
                        <li>{{ stripped[2:] if stripped.startswith('- ') else stripped }}</li>
                      {% endif %}
                    {% endfor %}
                  </ul>
                {% endfor %}
              </div>
        {% endif %}
        {% endfor %}
    </div>
    {% endfor %}

    <!-- Last Page -->
    <div class="page last-page">
        <h3>We are Randstad Digital</h3>
        <p>
            Randstad Digital is a leading technology partner that accelerates digital transformation for businesses by providing talent, production capabilities, and packaged solutions in specialized fields. Our expertise enables you to strengthen your team while connecting you with skilled professionals worldwide who align with the technologies you’ve chosen.<br><br>
            We focus on packaged solutions, empowering businesses to achieve their objectives quickly and efficiently. We operate across four service lines: customer experience (UX/UI), digital engineering and product engineering, data & analytics, and cloud & infrastructure. To achieve this, we offer our clients three engagement models: expertise, competency centers, and packaged solutions.<br><br>
            Launched on August 30, 2023, Randstad Digital has an in-depth understanding of the labor market, enabling us to support our clients in their digital transformation projects with our diversified and agile expertise and methodologies. Our 46,000 employees worldwide positively impact society by helping people achieve their full potential throughout their professional lives.<br><br>
            Randstad was founded in 1960, with its headquarters in Diemen, the Netherlands. In 2022, across our 39 markets, we helped over 2 million people find jobs that suited them and advised more than 230,000 clients on their talent needs. We generated €27.6 billion in revenue. Randstad N.V. is listed on Euronext Amsterdam.
        </p>

        <!-- Laser Image -->
        <div class="laser-container">
            <img src="{{ url_for('static', filename='laser.png') }}" alt="Laser Image" class="laser-image">
        </div>
    </div>
</body>
</html>